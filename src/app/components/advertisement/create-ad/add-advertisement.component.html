<div class="container">
  <div class="row">
    <div class="col-12 col-md-10 col-lg-8 col-xl-6 mx-auto py-4">
      <div class="title">
        <mat-card>
          <img src="../../../../assets/images/second_sound_logo.png" alt="Logo Second Sound" class="png-logo">
          <mat-card-header class="justify-content-center flex-column">
            <h1>Place Advertisement</h1>
          </mat-card-header>
          <ng-container *ngIf="loading">
            <div class="row">
              <div class="offset-5 col-3">
                <mat-spinner></mat-spinner>
              </div>
            </div>
          </ng-container>
          <mat-card-content class="d-flex justify-content-center">
            <form class="form-width" [formGroup]="advertisementForm">
              <div>
                <img [src]="uploadedFile" style="height:200px" alt="uploaded image" class="mb-3 mt-3">
              </div>
              <input type="file" (change)="onSelectFile($event)">
              <mat-form-field class="form-full-width pt-2" appearance="outline">
                <mat-label>Title</mat-label>
                <input matInput placeholder="Ex. Crazy Piano" [errorStateMatcher]="matcher" formControlName="title" maxlength="128">
                <mat-icon color="primary" matSuffix>title</mat-icon>
                <mat-hint>Please add a title</mat-hint>
                <mat-error *ngIf="advertisementForm.get('title').hasError('required')">
                  A <strong>title</strong> is <strong>required</strong>
                </mat-error>
              </mat-form-field>

              <div class="d-flex justify-content-center mt-4">
                <mat-form-field class="me-3 form-full-width" appearance="outline">
                  <mat-select placeholder="Category" formControlName="category" required>
                    <mat-option *ngFor="let category of categories" [value]="category">
                      {{category.name}}
                    </mat-option>
                  </mat-select>
                  <mat-error *ngIf="advertisementForm.get('category').hasError('required')">Please choose a category</mat-error>
                </mat-form-field>
                <mat-form-field class="form-full-width" appearance="outline" >
                  <mat-select placeholder="Subcategory" formControlName="subCategory" required [disabled]="!advertisementForm.get('category').valid">
                    <mat-option *ngFor="let subcategory of subCategories" [value]="subcategory">
                      {{subcategory.name}}
                    </mat-option>
                  </mat-select>
                  <mat-error *ngIf="advertisementForm.get('subCategory').hasError('required')">Please choose a subcategory</mat-error>
                </mat-form-field>
              </div>
              <mat-form-field class="form-full-width pt-2" appearance="outline">
                <mat-label>Description</mat-label>
                <textarea matInput placeholder="Ex. This is the most beautiful instrument you've ever seen..." [errorStateMatcher]="matcher" formControlName="description" cdkTextareaAutosize
                          cdkAutosizeMinRows="8"></textarea>
                <mat-icon color="primary" matSuffix>article</mat-icon>
                <mat-hint>Please add a description</mat-hint>
                <mat-error *ngIf="advertisementForm.get('subCategory').hasError('required')">
                  A <strong>description</strong> is <strong>required</strong>
                </mat-error>
              </mat-form-field>
              <mat-form-field class="form-full-width pt-2" appearance="outline">
                <mat-label>Price</mat-label>
                <input type="number" step="0.01" matInput placeholder="Ex. 2500,00" [errorStateMatcher]="matcher" formControlName="price">
                <mat-icon color="primary" matSuffix>euro</mat-icon>
                <mat-hint>Please add a price</mat-hint>
                <mat-error *ngIf="advertisementForm.get('price').hasError('required')">
                  A <strong>price</strong> is <strong>required</strong>
                </mat-error>
              </mat-form-field>
              <button (click)="openDialog()" [disabled]="!advertisementForm.valid" mat-flat-button color="primary" type="button" class="justify-content-center my-2 mb-5">
                Place Advertisement
              </button>
            </form>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>
</div>
